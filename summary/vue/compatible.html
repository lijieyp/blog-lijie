<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器兼容 | 李杰的博客</title>
    <meta name="description" content="Vuepress blog lijie">
    
    
    <link rel="preload" href="/blog-lijie/assets/css/0.styles.9a23e2da.css" as="style"><link rel="preload" href="/blog-lijie/assets/js/app.c84d788b.js" as="script"><link rel="preload" href="/blog-lijie/assets/js/2.06a6629a.js" as="script"><link rel="preload" href="/blog-lijie/assets/js/15.2e339e9a.js" as="script"><link rel="prefetch" href="/blog-lijie/assets/js/10.cb311e20.js"><link rel="prefetch" href="/blog-lijie/assets/js/11.0cef8909.js"><link rel="prefetch" href="/blog-lijie/assets/js/12.68e0e621.js"><link rel="prefetch" href="/blog-lijie/assets/js/13.c86b31eb.js"><link rel="prefetch" href="/blog-lijie/assets/js/14.ba25eb8a.js"><link rel="prefetch" href="/blog-lijie/assets/js/16.0179fcb1.js"><link rel="prefetch" href="/blog-lijie/assets/js/17.bd1cbb62.js"><link rel="prefetch" href="/blog-lijie/assets/js/18.2c4a4640.js"><link rel="prefetch" href="/blog-lijie/assets/js/19.6e587a7d.js"><link rel="prefetch" href="/blog-lijie/assets/js/20.35183c29.js"><link rel="prefetch" href="/blog-lijie/assets/js/3.c699bf6b.js"><link rel="prefetch" href="/blog-lijie/assets/js/4.cd628cd7.js"><link rel="prefetch" href="/blog-lijie/assets/js/5.2933ec46.js"><link rel="prefetch" href="/blog-lijie/assets/js/6.a51c015f.js"><link rel="prefetch" href="/blog-lijie/assets/js/7.dc161ca2.js"><link rel="prefetch" href="/blog-lijie/assets/js/8.6fea0b04.js"><link rel="prefetch" href="/blog-lijie/assets/js/9.d59d0b22.js">
    <link rel="stylesheet" href="/blog-lijie/assets/css/0.styles.9a23e2da.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog-lijie/" class="home-link router-link-active"><!----> <span class="site-name">李杰的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog-lijie/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog-lijie/summary/nginx/" class="nav-link">nginx</a></div><div class="nav-item"><a href="/blog-lijie/summary/webpack/" class="nav-link">webpack</a></div><div class="nav-item"><a href="/blog-lijie/summary/git/" class="nav-link">git</a></div><div class="nav-item"><a href="/blog-lijie/summary/vue/" class="nav-link router-link-active">vue</a></div><div class="nav-item"><a href="/blog-lijie/summary/reprint/" class="nav-link">转载</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">总结</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-lijie/summary/npm/" class="nav-link">npm</a></li><li class="dropdown-item"><!----> <a href="/blog-lijie/summary/plugins/" class="nav-link">插件</a></li><li class="dropdown-item"><!----> <a href="/blog-lijie/summary/mianshi/" class="nav-link">面试</a></li></ul></div></div> <a href="https://github.com/lijieyp/blog-lijie" target="_blank" rel="noopener noreferrer" class="repo-link">
    My GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog-lijie/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog-lijie/summary/nginx/" class="nav-link">nginx</a></div><div class="nav-item"><a href="/blog-lijie/summary/webpack/" class="nav-link">webpack</a></div><div class="nav-item"><a href="/blog-lijie/summary/git/" class="nav-link">git</a></div><div class="nav-item"><a href="/blog-lijie/summary/vue/" class="nav-link router-link-active">vue</a></div><div class="nav-item"><a href="/blog-lijie/summary/reprint/" class="nav-link">转载</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">总结</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-lijie/summary/npm/" class="nav-link">npm</a></li><li class="dropdown-item"><!----> <a href="/blog-lijie/summary/plugins/" class="nav-link">插件</a></li><li class="dropdown-item"><!----> <a href="/blog-lijie/summary/mianshi/" class="nav-link">面试</a></li></ul></div></div> <a href="https://github.com/lijieyp/blog-lijie" target="_blank" rel="noopener noreferrer" class="repo-link">
    My GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/blog-lijie/summary/vue/" class="sidebar-link">项目接口封装方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/#一-封装接口路径" class="sidebar-link">一.封装接口路径</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/#二-封装服务" class="sidebar-link">二.封装服务</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/#三-封装业务接口调用服务" class="sidebar-link">三.封装业务接口调用服务</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/#四-页面中调用接口" class="sidebar-link">四.页面中调用接口</a></li></ul></li><li><a href="/blog-lijie/summary/vue/compatible.html" class="active sidebar-link">浏览器兼容</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#js兼容" class="sidebar-link">JS兼容</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#babel-polifill安装配置" class="sidebar-link">babel-polifill安装配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#css兼容" class="sidebar-link">CSS兼容</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#ie兼容要点" class="sidebar-link">IE兼容要点</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#ie兼容问题汇总" class="sidebar-link">IE兼容问题汇总</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#css打包之后过大" class="sidebar-link">css打包之后过大</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#ie9-不兼容window-console方法" class="sidebar-link">ie9 不兼容window.console方法</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#兼容requestanimationframe" class="sidebar-link">兼容requestAnimationFrame</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#webpackjsonp未定义" class="sidebar-link">webpackJsonp未定义</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#兼容postmessage" class="sidebar-link">兼容postMessage</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#兼容dataset-下拉框无法选中" class="sidebar-link">兼容dataset(下拉框无法选中)</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#不兼容scrollto" class="sidebar-link">不兼容scrollTo</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#项目内路由跳转避免使用location-href" class="sidebar-link">项目内路由跳转避免使用location.href</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#兼容classlist（ie9）" class="sidebar-link">兼容classList（ie9）</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#iview组件库兼容" class="sidebar-link">iview组件库兼容</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#vue-treeselect组件兼容" class="sidebar-link">vue-treeselect组件兼容</a></li><li class="sidebar-sub-header"><a href="/blog-lijie/summary/vue/compatible.html#其它兼容问题" class="sidebar-link">其它兼容问题</a></li></ul></li><li><a href="/blog-lijie/summary/vue/mobile.html" class="sidebar-link">vue移动端适配</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="浏览器兼容"><a href="#浏览器兼容" aria-hidden="true" class="header-anchor">#</a> 浏览器兼容</h1> <h2 id="js兼容"><a href="#js兼容" aria-hidden="true" class="header-anchor">#</a> JS兼容</h2> <p>vue可通过<code>babel-polifill</code>兼容所有支持es5的浏览器</p> <h3 id="babel-polifill安装配置"><a href="#babel-polifill安装配置" aria-hidden="true" class="header-anchor">#</a> <code>babel-polifill</code>安装配置</h3> <p>安装npm包</p> <div class="language-bash extra-class"><pre class="language-bash"><code>cnpm <span class="token function">install</span> --save-dev -babel-polyfill
</code></pre></div><p>引入<code>babel-polifill</code>的三种方法</p> <div class="language-bash extra-class"><pre class="language-bash"><code>1.require<span class="token punctuation">(</span><span class="token string">&quot;babel-polyfill&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

2.import <span class="token string">&quot;babel-polyfill&quot;</span><span class="token punctuation">;</span>

3.module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>

　　entry: <span class="token punctuation">[</span><span class="token string">&quot;babel-polyfill&quot;</span>, <span class="token string">&quot;./app/js&quot;</span><span class="token punctuation">]</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>设置<code>.babelrc</code>,添加配置<code>&quot;useBuiltIns&quot;: &quot;entry&quot;</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;presets&quot;</span><span class="token keyword">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;env&quot;</span>, <span class="token punctuation">{</span>
      <span class="token string">&quot;modules&quot;</span><span class="token keyword">:</span> false,
      <span class="token string">&quot;useBuiltIns&quot;</span><span class="token keyword">:</span> <span class="token string">&quot;entry&quot;</span>,
      <span class="token string">&quot;targets&quot;</span><span class="token keyword">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;browsers&quot;</span><span class="token keyword">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&gt; 1%&quot;</span>, <span class="token string">&quot;last 2 versions&quot;</span>, <span class="token string">&quot;not ie &lt;= 8&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>,
    <span class="token string">&quot;stage-2&quot;</span>
  <span class="token punctuation">]</span>,
  <span class="token string">&quot;plugins&quot;</span><span class="token keyword">:</span> <span class="token punctuation">[</span><span class="token string">&quot;transform-vue-jsx&quot;</span>, <span class="token string">&quot;transform-runtime&quot;</span><span class="token punctuation">]</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">警告</p> <p>如果项目中使用第三方ui库,例如iview,则需要注意,如果在main.js里通过Vue.use(iview)全局引用
了iview,那么在组件中使用iview组件时候,一定不要在单独import个别组件,否则会在ie浏览器中引发错误</p></div> <div class="warning custom-block"><p class="custom-block-title">警告</p> <p>组件属性不要写两次,在ie里会报错,严重错误,页面不会显示
例如 <code>show-elevator</code> 声明两次</p> <div class="language-vue extra-class"><pre class="language-vue"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Page</span> <span class="token attr-name">show-elevator</span> <span class="token attr-name">show-total</span> <span class="token attr-name">@on-change</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeNo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@on-page-size-change</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeSize<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:page-size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>prop_pageSize<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:current</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>prop_pageNo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:total</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>prop_total<span class="token punctuation">&quot;</span></span> <span class="token attr-name">show-elevator</span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></div> <h2 id="css兼容"><a href="#css兼容" aria-hidden="true" class="header-anchor">#</a> CSS兼容</h2> <p>vue-cli创建项目已经内置了postss+autoprefixer,为不同浏览器自动添加了前缀.</p> <h2 id="ie兼容要点"><a href="#ie兼容要点" aria-hidden="true" class="header-anchor">#</a> IE兼容要点</h2> <ul><li><p>如果项目中使用了flex流式布局,那么ie9是不支持的,最低要求是ie10</p></li> <li><p>Iview使用的不支持ie的js语句:
table组件中使用了classList,最低支持ie10(不完全)</p></li> <li><p>Class extends无法在ie中正确使用,静态函数无法继承所以弃用</p></li> <li><p>axios全局error修正return error 改为return Promise.reject(error);否则在ie浏览器下错误也会进入then</p></li> <li><p>Ie11下,内部元素如果使用absolute,z-index要大于等于容器的z-index,否则会被背景图挡住</p></li> <li><p>Ie不支持设置背景透明时使用类似#ffffffee的方式</p></li> <li><p>由于Chrome、iOS 等相继限制非安全域的定位请求所以http资源定位的文件可能会加载失败,建议升级到https</p></li> <li><p>如果form表单中使用了excat类型的组件需要确保在业务数据中存在此字段</p></li></ul> <h2 id="ie兼容问题汇总"><a href="#ie兼容问题汇总" aria-hidden="true" class="header-anchor">#</a> IE兼容问题汇总</h2> <h3 id="css打包之后过大"><a href="#css打包之后过大" aria-hidden="true" class="header-anchor">#</a> css打包之后过大</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>1.需要安装两个插件<span class="token punctuation">(</span>extract-text-webpack-plugin,css-split-webpack-plugin<span class="token punctuation">)</span>
2.在webpack.base.config.js中加入以下代码
plugins: <span class="token punctuation">[</span>
    new ExtractTextPlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename: utils.assetsPath<span class="token punctuation">(</span><span class="token string">'css/[name].[contenthash].css'</span><span class="token punctuation">)</span>,
      allChunks: true,
    <span class="token punctuation">}</span><span class="token punctuation">)</span>,
    new CSSSplitWebpackPlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
      size: 4000,
      filename: <span class="token string">'static/css/[name]-[part].[ext]'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
3.将vue-loader.config.js中的isProduction值改为true
</code></pre></div><h3 id="ie9-不兼容window-console方法"><a href="#ie9-不兼容window-console方法" aria-hidden="true" class="header-anchor">#</a> ie9 不兼容window.console方法</h3> <p>将代码放在index.html中即可</p> <div class="language-bash extra-class"><pre class="language-bash"><code>try<span class="token punctuation">{</span>
        console.log<span class="token punctuation">(</span>11<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>catch <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token punctuation">;</span><span class="token punctuation">(</span>function<span class="token punctuation">(</span>g<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token string">'use strict'</span><span class="token punctuation">;</span>
          var _console <span class="token operator">=</span> g.console <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
          var methods <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'assert'</span>, <span class="token string">'clear'</span>, <span class="token string">'count'</span>, <span class="token string">'debug'</span>, <span class="token string">'dir'</span>, <span class="token string">'dirxml'</span>, <span class="token string">'exception'</span>, <span class="token string">'error'</span>, <span class="token string">'group'</span>, <span class="token string">'groupCollapsed'</span>, <span class="token string">'groupEnd'</span>, <span class="token string">'info'</span>, <span class="token string">'log'</span>, <span class="token string">'profile'</span>, <span class="token string">'profileEnd'</span>, <span class="token string">'table'</span>, <span class="token string">'time'</span>, <span class="token string">'timeEnd'</span>, <span class="token string">'timeStamp'</span>, <span class="token string">'trace'</span>, <span class="token string">'warn'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

          var console <span class="token operator">=</span> <span class="token punctuation">{</span>version: <span class="token string">'0.1.0'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
          var key<span class="token punctuation">;</span>
          for<span class="token punctuation">(</span>var i <span class="token operator">=</span> 0, len <span class="token operator">=</span> methods.length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i++<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            key <span class="token operator">=</span> methods<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            console<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>typeof _console<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token keyword">return</span> 0<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                Function.prototype.apply.call<span class="token punctuation">(</span>_console<span class="token punctuation">[</span>key<span class="token punctuation">]</span>, _console, arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          g.console <span class="token operator">=</span> console<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span>window<span class="token punctuation">))</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
</code></pre></div><h3 id="兼容requestanimationframe"><a href="#兼容requestanimationframe" aria-hidden="true" class="header-anchor">#</a> 兼容requestAnimationFrame</h3> <p>在main.js中加入以下代码</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  var lastTime <span class="token operator">=</span> 0<span class="token punctuation">;</span>
  var vendors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'ms'</span>, <span class="token string">'moz'</span>, <span class="token string">'webkit'</span>, <span class="token string">'o'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>var x <span class="token operator">=</span> 0<span class="token punctuation">;</span> x <span class="token operator">&lt;</span> vendors.length <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>window.requestAnimationFrame<span class="token punctuation">;</span> ++x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window.requestAnimationFrame <span class="token operator">=</span> window<span class="token punctuation">[</span>vendors<span class="token punctuation">[</span>x<span class="token punctuation">]</span> + <span class="token string">'RequestAnimationFrame'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    window.cancelAnimationFrame <span class="token operator">=</span> window<span class="token punctuation">[</span>vendors<span class="token punctuation">[</span>x<span class="token punctuation">]</span> + <span class="token string">'CancelAnimationFrame'</span><span class="token punctuation">]</span> <span class="token operator">||</span>
      window<span class="token punctuation">[</span>vendors<span class="token punctuation">[</span>x<span class="token punctuation">]</span> + <span class="token string">'CancelRequestAnimationFrame'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window.requestAnimationFrame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window.requestAnimationFrame <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>callback, element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      var currTime <span class="token operator">=</span> new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>.getTime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      var timeToCall <span class="token operator">=</span> Math.max<span class="token punctuation">(</span>0, 16 - <span class="token punctuation">(</span>currTime - lastTime<span class="token punctuation">))</span><span class="token punctuation">;</span>
      var <span class="token function">id</span> <span class="token operator">=</span> window.setTimeout<span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> callback<span class="token punctuation">(</span>currTime + timeToCall<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>,
        timeToCall<span class="token punctuation">)</span><span class="token punctuation">;</span>
      lastTime <span class="token operator">=</span> currTime + timeToCall<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token function">id</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window.cancelAnimationFrame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window.cancelAnimationFrame <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      clearTimeout<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="webpackjsonp未定义"><a href="#webpackjsonp未定义" aria-hidden="true" class="header-anchor">#</a> webpackJsonp未定义</h3> <p>更改webpack-dev-server版本为2.71或更低（npm install --save-dev webpack-dev-server@2.7.1）</p> <h3 id="兼容postmessage"><a href="#兼容postmessage" aria-hidden="true" class="header-anchor">#</a> 兼容postMessage</h3> <p>postMessage在ie9中不支持传输对象，只支持传输字符串（建议使用json序列化）</p> <h3 id="兼容dataset-下拉框无法选中"><a href="#兼容dataset-下拉框无法选中" aria-hidden="true" class="header-anchor">#</a> 兼容dataset(下拉框无法选中)</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>window.HTMLElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Object.getOwnPropertyNames<span class="token punctuation">(</span>HTMLElement.prototype<span class="token punctuation">)</span>.indexOf<span class="token punctuation">(</span><span class="token string">'dataset'</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token operator">=</span> -1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object.defineProperty<span class="token punctuation">(</span>HTMLElement.prototype, <span class="token string">'dataset'</span>, <span class="token punctuation">{</span>
      get: <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        var attributes <span class="token operator">=</span> this.attributes<span class="token punctuation">;</span> // 获取节点的所有属性
        var name <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        var value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> // 定义两个数组保存属性名和属性值
        var obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> // 定义一个空对象
        <span class="token keyword">for</span> <span class="token punctuation">(</span>var i <span class="token operator">=</span> 0<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> attributes.length<span class="token punctuation">;</span> i++<span class="token punctuation">)</span> <span class="token punctuation">{</span> // 遍历节点的所有属性
          <span class="token keyword">if</span> <span class="token punctuation">(</span>attributes<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.nodeName.slice<span class="token punctuation">(</span>0, 5<span class="token punctuation">)</span> <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'data-'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> // 如果属性名的前面5个字符符合<span class="token string">&quot;data-&quot;</span>
            // 取出属性名的<span class="token string">&quot;data-&quot;</span>的后面的字符串放入name数组中
            name.push<span class="token punctuation">(</span>attributes<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.nodeName.slice<span class="token punctuation">(</span>5<span class="token punctuation">))</span><span class="token punctuation">;</span>
            // 取出对应的属性值放入value数组中
            value.push<span class="token punctuation">(</span>attributes<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.nodeValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>var j <span class="token operator">=</span> 0<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> name.length<span class="token punctuation">;</span> j++<span class="token punctuation">)</span> <span class="token punctuation">{</span> // 遍历name和value数组
          obj<span class="token punctuation">[</span>name<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> // 将属性名和属性值保存到obj中
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span> // 返回对象
      <span class="token punctuation">}</span>,
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="不兼容scrollto"><a href="#不兼容scrollto" aria-hidden="true" class="header-anchor">#</a> 不兼容scrollTo</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>toTop<span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>el <span class="token operator">&amp;&amp;</span> el.scrollTo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        el.scrollTo<span class="token punctuation">(</span>0, 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        el.scrollTop <span class="token operator">=</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="项目内路由跳转避免使用location-href"><a href="#项目内路由跳转避免使用location-href" aria-hidden="true" class="header-anchor">#</a> 项目内路由跳转避免使用location.href</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>jump<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    location.href <span class="token operator">=</span> <span class="token string">'/#/about'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>浏览器地址栏url变了，然而页面没有发生改变！
应使用如下方法.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>jump<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">'/#/about'</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> path <span class="token operator">=</span> url.split<span class="token punctuation">(</span><span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">[</span>1<span class="token punctuation">]</span><span class="token punctuation">;</span>
    this.<span class="token variable">$router</span>.push<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="兼容classlist（ie9）"><a href="#兼容classlist（ie9）" aria-hidden="true" class="header-anchor">#</a> 兼容classList（ie9）</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>错误信息：
无法获取未定义或 null 引用的属性“add”
无法获取未定义或 null 引用的属性“remove”
如果你查看sourceMap发现了classList<span class="token punctuation">(</span><span class="token punctuation">)</span>.add或classList.remove<span class="token punctuation">(</span><span class="token punctuation">)</span>等等，那肯定是classList的问题了。
解决方案：添加以下代码到main.js
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'classList'</span> <span class="token keyword">in</span> document.documentElement<span class="token punctuation">))</span> <span class="token punctuation">{</span>
    Object.defineProperty<span class="token punctuation">(</span>HTMLElement.prototype, <span class="token string">'classList'</span>, <span class="token punctuation">{</span>
        get: <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            var self <span class="token operator">=</span> this<span class="token punctuation">;</span>
            <span class="token keyword">function</span> update<span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    var classes <span class="token operator">=</span> self.className.split<span class="token punctuation">(</span>/\s+/g<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    var index <span class="token operator">=</span> classes.indexOf<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

                    fn<span class="token punctuation">(</span>classes, index, value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    self.className <span class="token operator">=</span> classes.join<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                add: update<span class="token punctuation">(</span>function <span class="token punctuation">(</span>classes, index, value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>~index<span class="token punctuation">)</span> classes.push<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>,

                remove: update<span class="token punctuation">(</span>function <span class="token punctuation">(</span>classes, index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>~index<span class="token punctuation">)</span> classes.splice<span class="token punctuation">(</span>index, 1<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>,

                toggle: update<span class="token punctuation">(</span>function <span class="token punctuation">(</span>classes, index, value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>~index<span class="token punctuation">)</span> <span class="token punctuation">{</span> classes.splice<span class="token punctuation">(</span>index, 1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> classes.push<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>,

                contains: <span class="token keyword">function</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>~self.className.split<span class="token punctuation">(</span>/\s+/g<span class="token punctuation">)</span>.indexOf<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>,

                item: <span class="token keyword">function</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> self.className.split<span class="token punctuation">(</span>/\s+/g<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> null<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>,
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>,
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="iview组件库兼容"><a href="#iview组件库兼容" aria-hidden="true" class="header-anchor">#</a> iview组件库兼容</h2> <p>1、iview 的table组件中的selection列在ie中会因为宽度过窄而出现三个点（建议最低为60）</p> <p>2、iview 的modal组件在页面高度发生改变时modal框会发生偏移（建议使用固定定位）</p> <div class="language-bash extra-class"><pre class="language-bash"><code>.ivu-modal-wrap<span class="token punctuation">{</span>
  position: fixed<span class="token punctuation">;</span>
  top: 0<span class="token punctuation">;</span>
  left: 0<span class="token punctuation">;</span>
  bottom: 0<span class="token punctuation">;</span>
  right: 0<span class="token punctuation">;</span>
  margin: auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="vue-treeselect组件兼容"><a href="#vue-treeselect组件兼容" aria-hidden="true" class="header-anchor">#</a> vue-treeselect组件兼容</h2> <p>在ie10中vue-treeselect组件文本框中的文字只能显示一半</p> <div class="language-bash extra-class"><pre class="language-bash"><code>.vue-treeselect__placeholder<span class="token punctuation">{</span>
  overflow: visible<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="其它兼容问题"><a href="#其它兼容问题" aria-hidden="true" class="header-anchor">#</a> 其它兼容问题</h2> <h4 id="点击我"><a href="#点击我" aria-hidden="true" class="header-anchor">#</a> <a href="https://juejin.im/post/5b94f141f265da0ada5222dc" target="_blank" rel="noopener noreferrer">点击我<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog-lijie/summary/vue/" class="prev router-link-active">
          项目接口封装方法
        </a></span> <span class="next"><a href="/blog-lijie/summary/vue/mobile.html">
          vue移动端适配
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog-lijie/assets/js/app.c84d788b.js" defer></script><script src="/blog-lijie/assets/js/2.06a6629a.js" defer></script><script src="/blog-lijie/assets/js/15.2e339e9a.js" defer></script>
  </body>
</html>
